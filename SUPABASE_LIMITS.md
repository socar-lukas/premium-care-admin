# Supabase 무료 플랜 제한 및 초과 시 정책

## Supabase 무료 플랜 제한

### 데이터베이스 제한
- **데이터베이스 크기**: 500MB
- **API 요청**: 50,000/월
- **파일 저장소**: 1GB
- **대역폭**: 5GB/월

## 500MB 초과 시 어떻게 되나요?

### 실제 정책 (2024)

#### ⚠️ 중요: 자동 중지되지 않음
- Supabase는 **500MB를 넘어도 즉시 중지하지 않습니다**
- **경고 이메일** 발송
- **일정 기간 동안 계속 작동** (보통 1-2주)
- 이후 **읽기 전용 모드**로 전환 가능

#### 단계별 처리

**1단계: 500MB 도달**
- 경고 이메일 발송
- 대시보드에 경고 표시
- 계속 작동 (쓰기 가능)

**2단계: 500MB 초과 (약 10-20% 초과)**
- 추가 경고 이메일
- 대시보드에 경고 강화
- 계속 작동

**3단계: 과도한 초과 (약 50% 이상)**
- **읽기 전용 모드**로 전환 가능
- 또는 **유료 플랜으로 업그레이드 요청**
- 데이터 삭제 요청

### 실제 시나리오

#### 시나리오 1: 약간 초과 (500MB → 600MB)
```
상태: 계속 작동 ✅
조치: 경고만 표시
기간: 1-2주 정도 여유
```

#### 시나리오 2: 많이 초과 (500MB → 1GB)
```
상태: 읽기 전용 모드로 전환 가능 ⚠️
조치: 데이터 삭제 또는 업그레이드 요청
기간: 즉시 또는 며칠 내
```

## 해결 방법

### 방법 1: 데이터 정리 (무료)

**오래된 데이터 삭제:**
```sql
-- 예: 1년 이상 된 점검 기록 삭제
DELETE FROM Inspection 
WHERE inspectionDate < NOW() - INTERVAL '1 year';

-- 또는 특정 차량 삭제
DELETE FROM Vehicle WHERE id = '...';
```

**장점:**
- ✅ 무료로 계속 사용 가능
- ✅ 필요한 데이터만 보관

**단점:**
- ⚠️ 데이터 손실 가능
- ⚠️ 정기적인 관리 필요

---

### 방법 2: 유료 플랜 업그레이드

**Pro 플랜:**
- **가격**: $25/월
- **데이터베이스**: 8GB
- **API 요청**: 무제한
- **파일 저장소**: 100GB

**장점:**
- ✅ 충분한 용량
- ✅ 추가 기능 제공

**단점:**
- ⚠️ 월 비용 발생

---

### 방법 3: 다른 무료 서비스로 마이그레이션

**Neon (추천):**
- **무료 플랜**: 3GB (Supabase보다 6배)
- **완전 무료**
- **신용카드 불필요**

**장점:**
- ✅ 더 많은 용량
- ✅ 완전 무료
- ✅ 빠른 성능

---

## 500MB는 얼마나 많은가?

### 실제 사용량 예시

**차량 관리 시스템 기준:**

```
차량 정보 (1개): 약 1KB
점검 기록 (1개): 약 2KB
점검 부위 (1개): 약 1KB
사진 메타데이터 (1개): 약 0.5KB

총계:
- 차량 1,000대: 약 1MB
- 점검 기록 10,000개: 약 20MB
- 점검 부위 50,000개: 약 50MB
- 사진 메타데이터 100,000개: 약 50MB

총 데이터베이스 사용량: 약 121MB
```

**결론:**
- ✅ **500MB면 약 4,000대 차량, 40,000개 점검 기록 가능**
- ✅ **소규모-중규모 업체에는 충분**

---

## 예방 방법

### 1. 정기적인 데이터 정리

**자동 정리 스크립트 (예시):**
```typescript
// 1년 이상 된 점검 기록 삭제
async function cleanupOldData() {
  const oneYearAgo = new Date();
  oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
  
  await prisma.inspection.deleteMany({
    where: {
      inspectionDate: {
        lt: oneYearAgo
      }
    }
  });
}
```

### 2. 데이터베이스 크기 모니터링

**Supabase 대시보드에서:**
- Settings > Database > Database size 확인
- 정기적으로 확인하여 예방

### 3. 아카이브 정책

**오래된 데이터는 별도 저장:**
- Google Drive에 백업
- 데이터베이스에서 삭제
- 필요 시 복구

---

## 대안 비교

### 용량 비교

| 서비스 | 무료 용량 | 초과 시 | 추천도 |
|--------|----------|---------|--------|
| **Supabase** | 500MB | 경고 → 읽기 전용 | ⭐⭐ |
| **Neon** | 3GB | 경고 → 업그레이드 요청 | ⭐⭐⭐ |
| **Railway** | 크레딧 기반 | 과금 | ⭐⭐ |
| **Render** | 무제한* | 계속 작동 | ⭐⭐⭐ |

*Render는 실제로는 제한이 있지만 매우 관대함

---

## 추천 전략

### 소규모 업체 (차량 100대 이하)
- ✅ **Supabase 500MB 충분**
- ✅ 정기적인 데이터 정리
- ✅ 1-2년 사용 가능

### 중규모 업체 (차량 500대 이하)
- ✅ **Neon (3GB) 추천**
- ✅ 또는 Supabase + 정기 정리
- ✅ 3-5년 사용 가능

### 대규모 업체 (차량 1000대 이상)
- ✅ **Supabase Pro ($25/월)**
- ✅ 또는 Neon Pro
- ✅ 충분한 용량

---

## 실제 사용 예시

### 시나리오: 500MB 초과

**상황:**
- 현재 사용량: 600MB
- 제한: 500MB
- 초과: 100MB (20%)

**발생하는 일:**
1. 경고 이메일 수신
2. 대시보드에 경고 표시
3. 계속 작동 (쓰기 가능)
4. 1-2주 내 데이터 정리 권장

**해결 방법:**
```sql
-- 오래된 데이터 삭제 (약 150MB 정리)
DELETE FROM Inspection 
WHERE inspectionDate < '2023-01-01';

-- 결과: 450MB로 감소 ✅
```

---

## 요약

### 500MB 초과 시

1. **즉시 중지되지 않음** ✅
2. **경고 이메일 발송** ⚠️
3. **일정 기간 계속 작동** ✅
4. **과도한 초과 시 읽기 전용 가능** ⚠️

### 해결 방법

1. **데이터 정리** (무료, 권장)
2. **Neon으로 마이그레이션** (3GB 무료)
3. **Supabase Pro 업그레이드** ($25/월)

### 결론

**500MB는 소규모-중규모 업체에는 충분합니다!**

초과 시:
- ✅ 즉시 중지되지 않음
- ✅ 데이터 정리로 해결 가능
- ✅ 또는 Neon으로 마이그레이션 (3GB 무료)

**걱정하지 마세요! 500MB는 생각보다 많습니다!** 😊

