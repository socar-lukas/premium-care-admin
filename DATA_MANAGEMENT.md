# 데이터 관리 가이드

## 📊 적재된 데이터 조회 방법

### 1. 대시보드에서 전체 현황 확인
- **홈페이지 (`/`)**: 
  - 전체 차량 수 확인
  - 오늘 점검 건수 확인
  - 최근 등록된 차량 목록 확인
  - 검색 기능으로 특정 차량 찾기

### 2. 차량 목록 페이지
- **경로**: `/vehicles` 또는 상단 메뉴의 "차량 목록"
- **기능**:
  - 모든 등록된 차량 목록 조회
  - 차량번호 또는 소유자명으로 검색
  - 페이지네이션으로 많은 데이터도 쉽게 탐색
  - 각 차량의 최근 점검일 확인

### 3. 차량 상세 페이지
- **경로**: 차량 목록에서 차량 클릭 또는 `/vehicles/{차량ID}`
- **확인 가능한 정보**:
  - 차량 기본 정보 (차량번호, 소유자, 모델, 연식 등)
  - 해당 차량의 모든 점검 기록 목록
  - 각 점검 기록의 날짜, 유형, 상태
  - 점검 기록별 사진 썸네일

### 4. 점검 기록 상세 페이지
- **경로**: 차량 상세 페이지에서 점검 기록 클릭 또는 `/inspections/{점검ID}`
- **확인 가능한 정보**:
  - 점검 일자, 유형, 전체 상태
  - 점검 담당자 정보
  - 점검 부위별 상세 내용
  - 각 부위별 사진 (원본 크기로 확인 가능)
  - 사진별 설명 및 메모

### 5. Google Drive에서 사진 확인
- **경로**: Google Drive 웹사이트 또는 앱
- **폴더 구조**:
  ```
  PremiumCare/ (또는 설정한 상위 폴더)
    └── {차량번호}/
        ├── 사진1.jpg
        ├── 사진2.jpg
        └── ...
  ```
- **파일명 형식**: `{차량번호} - {소유자명}, {날짜시간}, {상태}, {점검유형}, {담당자}.확장자`

## 💾 데이터 저장 위치

### 1. 데이터베이스 (SQLite)
- **파일 위치**: 프로젝트 루트의 `dev.db` 파일
- **저장 내용**:
  - 차량 정보
  - 점검 기록
  - 점검 부위 정보
  - 사진 메타데이터 (파일 경로, Google Drive ID 등)

### 2. 로컬 파일시스템
- **폴더 위치**: `uploads/vehicles/{차량번호}/{날짜}/`
- **저장 내용**: 업로드된 사진 파일
- **예시**: `uploads/vehicles/156허7788/2025-12-23/파일명.jpg`

### 3. Google Drive
- **저장 위치**: 설정한 Google Drive 폴더
- **저장 내용**: 사진 파일의 백업 복사본
- **접근**: Google Drive 웹사이트 또는 앱에서 확인 가능

## 📅 데이터 보관 정책

### 현재 보관 정책

**기본 정책**: **데이터는 무기한 보관됩니다**

현재 시스템에는 자동 삭제 기능이 없으며, 다음 경우에만 데이터가 삭제됩니다:

1. **수동 삭제**
   - 차량 삭제: 차량 목록에서 "삭제" 버튼 클릭 시 해당 차량과 관련된 모든 점검 기록, 사진이 함께 삭제됩니다
   - 점검 기록 삭제: 점검 기록 상세 페이지에서 삭제 시 해당 기록과 관련 사진이 삭제됩니다
   - 사진 삭제: 개별 사진 삭제 가능

2. **Cascade 삭제**
   - 차량 삭제 시 → 관련된 모든 점검 기록 삭제 → 관련된 모든 사진 삭제
   - 점검 기록 삭제 시 → 관련된 모든 점검 부위 및 사진 삭제

### 데이터 보관 기간 권장사항

비즈니스 요구사항에 따라 다음 정책을 고려할 수 있습니다:

#### 옵션 1: 무기한 보관 (현재 설정)
- **장점**: 모든 데이터를 영구적으로 보관
- **단점**: 저장 공간이 계속 증가
- **권장**: 중요 기록이 많고 저장 공간이 충분한 경우

#### 옵션 2: 기간별 보관
- **예시**: 3년, 5년, 10년 등 특정 기간 후 자동 삭제
- **구현 필요**: 자동 삭제 스크립트 개발 필요
- **권장**: 법적 보관 의무가 있는 경우

#### 옵션 3: 아카이브 정책
- **예시**: 오래된 데이터는 별도 아카이브로 이동
- **구현 필요**: 아카이브 시스템 구축 필요
- **권장**: 오래된 데이터도 가끔 확인이 필요한 경우

## 🔍 데이터 백업 및 복구

### 백업 방법

1. **데이터베이스 백업**
   ```bash
   # SQLite 데이터베이스 파일 복사
   cp dev.db dev.db.backup
   ```

2. **로컬 파일 백업**
   ```bash
   # uploads 폴더 전체 복사
   cp -r uploads uploads.backup
   ```

3. **Google Drive 백업**
   - Google Drive는 자동으로 클라우드에 저장되므로 별도 백업 불필요
   - Google Drive의 버전 관리 기능 활용 가능

### 복구 방법

1. **데이터베이스 복구**
   ```bash
   # 백업 파일로 복구
   cp dev.db.backup dev.db
   ```

2. **로컬 파일 복구**
   ```bash
   # 백업 폴더로 복구
   cp -r uploads.backup uploads
   ```

## 📊 데이터 통계 확인

### 현재 시스템에서 확인 가능한 통계

1. **대시보드**
   - 전체 차량 수
   - 오늘 점검 건수

2. **차량별 통계** (차량 상세 페이지)
   - 총 점검 횟수
   - 최근 점검일
   - 점검 기록 목록

### 추가 통계 기능 (향후 개발 가능)

- 월별/연도별 점검 통계
- 차량별 평균 점검 주기
- 점검 유형별 통계
- 상태별 분포
- 담당자별 작업량

## ⚠️ 주의사항

1. **데이터 삭제 시 주의**
   - 차량 삭제 시 관련된 모든 데이터가 영구적으로 삭제됩니다
   - 삭제 전에 백업을 권장합니다

2. **저장 공간 관리**
   - 로컬 파일시스템의 `uploads` 폴더가 계속 증가할 수 있습니다
   - 정기적으로 디스크 공간을 확인하세요

3. **Google Drive 용량**
   - Google Drive 무료 계정은 15GB 제한이 있습니다
   - 용량이 부족하면 Google Workspace 구독을 고려하세요

4. **데이터베이스 크기**
   - SQLite는 파일 크기 제한이 있지만 일반적으로 충분합니다
   - 대용량 데이터의 경우 PostgreSQL로 마이그레이션을 권장합니다

## 🛠️ 데이터 관리 도구

### 데이터베이스 직접 조회 (고급 사용자)

SQLite 데이터베이스를 직접 조회하려면:

```bash
# SQLite CLI 설치 (macOS)
brew install sqlite

# 데이터베이스 열기
sqlite3 dev.db

# 쿼리 예시
SELECT * FROM Vehicle;
SELECT * FROM Inspection WHERE inspectionDate > '2025-01-01';
SELECT COUNT(*) FROM InspectionPhoto;
```

### 데이터 내보내기 (향후 개발 가능)

- CSV 내보내기
- Excel 내보내기
- PDF 리포트 생성

## 📞 문의 및 지원

데이터 관리 관련 문의사항이 있으시면 개발팀에 문의하세요.

